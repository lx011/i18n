{"version":3,"file":"i18n.umd.js","sources":["../src/utils.js","../src/http.js","../src/index.js"],"sourcesContent":["import getData from \"./http\";\n\nconst i18nTypes = ['c', 'k', 'p', 's', 'p-ph', 'c-ph', 'k-ph', 'p-i', 'c-i', 'k-i']\n\nconst setLang = lang => window.localStorage.setItem('lx011I18nLang', lang)\nconst getLang = () => window.localStorage.getItem('lx011I18nLang')\n\nconst getJSON = (uri, type, _el, _attr, i) => {\n  _el.forEach(j => {\n    if(j.getAttribute('i18n-o') === null) {\n      getData(uri, data => {\n        const val = j.getAttribute(_attr)\n        if(i === type) j.innerHTML = data[val]\n        if(i === `${type}-i`) j.src = data[val]\n        if(i === `${type}-ph`) j.placeholder = data[val]\n      })\n    }\n  })\n}\n\nexport {\n  i18nTypes,\n  setLang,\n  getLang,\n  getJSON,\n}","/**\n * httpRequest\n * @param {String} uri \n * @param {Function} callback \n */\nexport default function (uri, cb) {\n  var httpRequest\n  if (window.XMLHttpRequest) {\n    // Mozilla, Safari, IE7+ ...\n    httpRequest = new XMLHttpRequest()\n  }\n\n  if (!httpRequest) {\n    alert('Giving up :( Cannot create an XMLHTTP instance');\n    return false\n  }\n  httpRequest.onreadystatechange = handler\n  httpRequest.open('GET', uri)\n  httpRequest.send(null)\n\n  function handler() {\n    if(httpRequest.readyState === XMLHttpRequest.DONE) {\n      if(httpRequest.status === 200) {\n        cb(JSON.parse(httpRequest.responseText))\n      } else {\n        console.error('There was a problem with the request.')\n      }\n    }\n  }\n}","import { i18nTypes as types, getLang, setLang, getJSON } from './utils'\n\nwindow.addEventListener('load', () => {\n  let getFormat = document.querySelector('head meta[i18n]')\n\n  if(getFormat) {\n    getFormat = getFormat.getAttribute('i18n')\n    // (Get & Set) language\n    let _getLang = getLang()\n    const langBtns = document.querySelectorAll('[i18n-lang-btn]')\n    if(!_getLang) {\n      const currLang = document.querySelector('[i18n-def]') || langBtns[0]\n      currLang.classList.add('i18n-active')\n      if(currLang) _getLang = currLang.getAttribute('i18n-lang-btn')\n      setLang(_getLang)\n    } else {\n      langBtns.forEach(i => {\n        if(i.getAttribute('i18n-lang-btn') === getLang()) {\n          i.classList.add('i18n-active')\n        }\n      })\n    }\n    \n    const rules = () => {\n      const path = getFormat.replace('{lang}', getLang())\n      const basePath = path.match(/(.*i18n\\/)(.*)/)[1]\n      types.forEach(i => {\n        const _attr = `i18n-${i}`\n        const _el = document.querySelectorAll(`[${_attr}]`)\n        if(_el.length > 0) {\n          switch (true) {\n            case /^c((-ph)?|(-i)?)$/.test(i): // common\n              getJSON(`${basePath}/pub/common.${getLang()}.json`, 'c', _el, _attr, i)\n              break\n            case /^k(-ph)?$/.test(i): // keyword\n              getJSON(`${basePath}/pub/keywords.${getLang()}.json`, 'k', _el, _attr, i)\n              break\n            case /^p((-ph)?|(-i)?)$/.test(i): // current page\n              getJSON(`${path}.json`, 'p', _el, _attr, i)\n              break\n            case /^s$/.test(i): // i18n class\n              document.querySelectorAll('[i18n-s]').forEach(i => {\n                const notI18nCls = Array.from(i.classList).filter(j => !/i18n-*/.test(j)).join(' ')\n                i.classList = notI18nCls\n                i.classList.add(`i18n-${getLang()}`)\n              })\n              break\n            default:\n              break\n          }\n        }\n      })\n    }\n    rules()\n    langBtns.forEach(btn => {\n      btn.addEventListener('click', () => {\n        if(getLang() !== btn.getAttribute('i18n-lang-btn')) {\n          langBtns.forEach(i => {\n            i.classList.remove('i18n-active')\n          })\n          btn.classList.add('i18n-active')\n          setLang(btn.getAttribute('i18n-lang-btn'))\n          rules()\n        }\n      })\n    })\n  }\n})"],"names":["i18nTypes","setLang","lang","window","localStorage","setItem","getLang","getItem","getJSON","uri","type","_el","_attr","i","forEach","j","getAttribute","cb","httpRequest","XMLHttpRequest","alert","onreadystatechange","readyState","DONE","status","JSON","parse","responseText","console","error","open","send","getData","data","val","innerHTML","src","placeholder","addEventListener","getFormat","document","querySelector","_getLang","langBtns","querySelectorAll","classList","add","currLang","rules","path","replace","basePath","match","types","length","test","notI18nCls","Array","from","filter","join","btn","remove"],"mappings":"6JAEMA,EAAY,CAAC,IAAK,IAAK,IAAK,IAAK,OAAQ,OAAQ,OAAQ,MAAO,MAAO,OAEvEC,EAAUC,GAAQC,OAAOC,aAAaC,QAAQ,gBAAiBH,GAC/DI,EAAU,IAAMH,OAAOC,aAAaG,QAAQ,iBAE5CC,EAAU,CAACC,EAAKC,EAAMC,EAAKC,EAAOC,KACtCF,EAAIG,QAAQC,IACsB,OAA7BA,EAAEC,aAAa,WCJP,SAAUP,EAAKQ,OACxBC,KACAf,OAAOgB,iBAETD,EAAc,IAAIC,iBAGfD,SACHE,MAAM,mDACC,EAETF,EAAYG,8BAKPH,EAAYI,aAAeH,eAAeI,OACjB,MAAvBL,EAAYM,OACbP,EAAGQ,KAAKC,MAAMR,EAAYS,eAE1BC,QAAQC,MAAM,2CARpBX,EAAYY,KAAK,MAAOrB,GACxBS,EAAYa,KAAK,MDRbC,CAAQvB,EAAKwB,UACLC,EAAMnB,EAAEC,aAAaJ,GACxBC,IAAMH,IAAMK,EAAEoB,UAAYF,EAAKC,IAC/BrB,OAASH,QAAUK,EAAEqB,IAAMH,EAAKC,IAChCrB,OAASH,SAAWK,EAAEsB,YAAcJ,EAAKC,SEZpD/B,OAAOmC,iBAAiB,OAAQ,SAC1BC,EAAYC,SAASC,cAAc,sBAEpCF,EAAW,CACZA,EAAYA,EAAUvB,aAAa,YAE/B0B,EAAWpC,UACTqC,EAAWH,SAASI,iBAAiB,sBACvCF,EAMFC,EAAS7B,QAAQD,IACZA,EAAEG,aAAa,mBAAqBV,KACrCO,EAAEgC,UAAUC,IAAI,qBARR,OACNC,EAAWP,SAASC,cAAc,eAAiBE,EAAS,GAClEI,EAASF,UAAUC,IAAI,eACpBC,IAAUL,EAAWK,EAAS/B,aAAa,kBAC9Cf,EAAQyC,SASJM,EAAQ,WACNC,EAAOV,EAAUW,QAAQ,SAAU5C,KACnC6C,EAAWF,EAAKG,MAAM,kBAAkB,GAC9CC,EAAMvC,QAAQD,UACND,UAAgBC,IAChBF,EAAM6B,SAASI,qBAAqBhC,SACvCD,EAAI2C,OAAS,UACN,OACD,oBAAoBC,KAAK1C,GAC5BL,KAAW2C,gBAAuB7C,WAAkB,IAAKK,EAAKC,EAAOC,aAElE,YAAY0C,KAAK1C,GACpBL,KAAW2C,kBAAyB7C,WAAkB,IAAKK,EAAKC,EAAOC,aAEpE,oBAAoB0C,KAAK1C,GAC5BL,KAAWyC,SAAa,IAAKtC,EAAKC,EAAOC,aAEtC,MAAM0C,KAAK1C,GACd2B,SAASI,iBAAiB,YAAY9B,QAAQD,UACtC2C,EAAaC,MAAMC,KAAK7C,EAAEgC,WAAWc,OAAO5C,IAAM,SAASwC,KAAKxC,IAAI6C,KAAK,KAC/E/C,EAAEgC,UAAYW,EACd3C,EAAEgC,UAAUC,YAAYxC,aASpC0C,IACAL,EAAS7B,QAAQ+C,IACfA,EAAIvB,iBAAiB,QAAS,KACzBhC,MAAcuD,EAAI7C,aAAa,mBAChC2B,EAAS7B,QAAQD,IACfA,EAAEgC,UAAUiB,OAAO,iBAErBD,EAAIhB,UAAUC,IAAI,eAClB7C,EAAQ4D,EAAI7C,aAAa,kBACzBgC"}