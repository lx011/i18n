!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";const e=["c","k","p","s","p-ph","c-ph","k-ph","p-i","c-i","k-i"],t=e=>window.localStorage.setItem("lx011I18nLang",e),n=()=>window.localStorage.getItem("lx011I18nLang"),i=(e,t,n,i,a)=>{n.forEach(n=>{null===n.getAttribute("i18n-o")&&function(e,t){var n;if(window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),!n)return alert("Giving up :( Cannot create an XMLHTTP instance"),!1;n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(200===n.status?t(n.responseText):console.error("There was a problem with the request."))},n.open("GET",e),n.send(null)}(e,e=>{e=JSON.parse(e);let c=n.getAttribute(i);a===t&&(n.innerHTML=e[c]),a===`${t}-i`&&(n.src=e[c]),a===`${t}-ph`&&(n.placeholder=e[c])})})};window.addEventListener("load",()=>{let a=document.querySelector("head meta[i18n]");if(a){a=a.getAttribute("i18n");let c=n(),s=document.querySelectorAll("[i18n-lang-btn]");if(c)s.forEach(e=>{e.getAttribute("i18n-lang-btn")===n()&&e.classList.add("i18n-active")});else{let e=document.querySelector("[i18n-def]")||s[0];e.classList.add("i18n-active"),e&&(c=e.getAttribute("i18n-lang-btn")),t(c)}const o=()=>{let t=a.replace("{lang}",n()),c=t.match(/(.*i18n\/)(.*)/)[1];e.forEach(e=>{let a=`i18n-${e}`,s=document.querySelectorAll(`[${a}]`);if(s.length>0)switch(!0){case/^c((-ph)?|(-i)?)$/.test(e):i(`${c}/pub/common.${n()}.json`,"c",s,a,e);break;case/^k(-ph)?$/.test(e):i(`${c}/pub/keywords.${n()}.json`,"k",s,a,e);break;case/^p((-ph)?|(-i)?)$/.test(e):i(`${t}.json`,"p",s,a,e);break;case/^s$/.test(e):document.querySelectorAll("[i18n-s]").forEach(e=>{let t=Array.from(e.classList).filter(e=>!/i18n-*/.test(e)).join(" ");e.classList=t,e.classList.add(`i18n-${n()}`)})}})};o(),s.forEach(e=>{e.addEventListener("click",()=>{n()!==e.getAttribute("i18n-lang-btn")&&(s.forEach(e=>{e.classList.remove("i18n-active")}),e.classList.add("i18n-active"),t(e.getAttribute("i18n-lang-btn")),o())})})}})});
//# sourceMappingURL=i18n.umd.js.map
