{"version":3,"file":"i18n.esm.js","sources":["../src/http.js","../src/utils.js","../src/index.js"],"sourcesContent":["/**\n * httpRequest\n * @param {String} uri \n * @param {Function} callback \n */\nexport default function (uri, cb) {\n  var httpRequest\n  if (window.XMLHttpRequest) {\n    // Mozilla, Safari, IE7+ ...\n    httpRequest = new XMLHttpRequest()\n  } else if (window.ActiveXObject) {\n    // IE 6 and older\n    httpRequest = new ActiveXObject(\"Microsoft.XMLHTTP\")\n  }\n\n  if (!httpRequest) {\n    alert('Giving up :( Cannot create an XMLHTTP instance');\n    return false\n  }\n  httpRequest.onreadystatechange = handler\n  httpRequest.open('GET', uri)\n  httpRequest.send(null)\n\n  function handler() {\n    if(httpRequest.readyState === XMLHttpRequest.DONE) {\n      if(httpRequest.status === 200) {\n        cb(httpRequest.responseText)\n      } else {\n        console.error('There was a problem with the request.')\n      }\n    }\n  }\n}","import getData from './http'\n\nconst i18nTypes = ['c', 'k', 'p', 's', 'p-ph', 'c-ph', 'k-ph', 'p-i', 'c-i', 'k-i']\n\nconst setLang = lang => window.localStorage.setItem('lx011I18nLang', lang)\nconst getLang = () => window.localStorage.getItem('lx011I18nLang')\n\nconst getJSON = (uri, type, _el, _attr, i) => {\n  _el.forEach(j => {\n    if(j.getAttribute('i18n-o') === null) {\n      getData(uri, data => {\n        data = JSON.parse(data)\n        let val = j.getAttribute(_attr)\n        if(i === type) j.innerHTML = data[val]\n        if(i === `${type}-i`) j.src = data[val]\n        if(i === `${type}-ph`) j.placeholder = data[val]\n      })\n    }\n  })\n}\n\nexport {\n  i18nTypes,\n  setLang,\n  getLang,\n  getJSON,\n}","import { i18nTypes as types, getLang, setLang, getJSON } from './utils'\n\nwindow.addEventListener('load', () => {\n  let getFormat = document.querySelector('head meta[i18n]')\n\n  if(getFormat) {\n    getFormat = getFormat.getAttribute('i18n')\n    // (Get & Set) language\n    let _getLang = getLang()\n    let langBtns = document.querySelectorAll('[i18n-lang-btn]')\n    if(!_getLang) {\n      let currLang = document.querySelector('[i18n-def]') || langBtns[0]\n      currLang.classList.add('i18n-active')\n      if(currLang) _getLang = currLang.getAttribute('i18n-lang-btn')\n      setLang(_getLang)\n    } else {\n      langBtns.forEach(i => {\n        if(i.getAttribute('i18n-lang-btn') === getLang()) {\n          i.classList.add('i18n-active')\n        }\n      })\n    }\n    \n    const rules = () => {\n      let path = getFormat.replace('{lang}', getLang())\n      let basePath = path.match(/(.*i18n\\/)(.*)/)[1]\n      types.forEach(i => {\n        let _attr = `i18n-${i}`\n        let _el = document.querySelectorAll(`[${_attr}]`)\n        if(_el.length > 0) {\n          switch (true) {\n            case /^c((-ph)?|(-i)?)$/.test(i): // common\n              getJSON(`${basePath}/pub/common.${getLang()}.json`, 'c', _el, _attr, i)\n              break\n            case /^k(-ph)?$/.test(i): // keyword\n              getJSON(`${basePath}/pub/keywords.${getLang()}.json`, 'k', _el, _attr, i)\n              break\n            case /^p((-ph)?|(-i)?)$/.test(i): // current page\n              getJSON(`${path}.json`, 'p', _el, _attr, i)\n              break\n            case /^s$/.test(i): // i18n class\n              document.querySelectorAll('[i18n-s]').forEach(i => {\n                let notI18nCls = Array.from(i.classList).filter(j => !/i18n-*/.test(j)).join(' ')\n                i.classList = notI18nCls\n                i.classList.add(`i18n-${getLang()}`)\n              })\n              break\n            default:\n              break\n          }\n        }\n      })\n    }\n    rules()\n    langBtns.forEach(btn => {\n      btn.addEventListener('click', () => {\n        if(getLang() !== btn.getAttribute('i18n-lang-btn')) {\n          langBtns.forEach(i => {\n            i.classList.remove('i18n-active')\n          })\n          btn.classList.add('i18n-active')\n          setLang(btn.getAttribute('i18n-lang-btn'))\n          rules()\n        }\n      })\n    })\n  }\n})\n"],"names":["uri","cb","httpRequest","window","XMLHttpRequest","ActiveXObject","alert","onreadystatechange","readyState","DONE","status","responseText","console","error","open","send","i18nTypes","setLang","lang","localStorage","setItem","getLang","getItem","getJSON","type","_el","_attr","i","forEach","j","getAttribute","getData","data","JSON","parse","val","innerHTML","src","placeholder","addEventListener","getFormat","document","querySelector","_getLang","langBtns","querySelectorAll","classList","add","currLang","rules","path","replace","basePath","match","types","length","test","notI18nCls","Array","from","filter","join","btn","remove"],"mappings":"AAKe,iBAAUA,EAAKC,OACxBC,KACAC,OAAOC,eAETF,EAAc,IAAIE,eACTD,OAAOE,gBAEhBH,EAAc,IAAIG,cAAc,uBAG7BH,SACHI,MAAM,mDACC,EAETJ,EAAYK,8BAKPL,EAAYM,aAAeJ,eAAeK,OACjB,MAAvBP,EAAYQ,OACbT,EAAGC,EAAYS,cAEfC,QAAQC,MAAM,2CARpBX,EAAYY,KAAK,MAAOd,GACxBE,EAAYa,KAAK,YCnBbC,UAAY,CAAC,IAAK,IAAK,IAAK,IAAK,OAAQ,OAAQ,OAAQ,MAAO,MAAO,OAEvEC,QAAUC,GAAQf,OAAOgB,aAAaC,QAAQ,gBAAiBF,GAC/DG,QAAU,IAAMlB,OAAOgB,aAAaG,QAAQ,iBAE5CC,QAAU,CAACvB,EAAKwB,EAAMC,EAAKC,EAAOC,KACtCF,EAAIG,QAAQC,IACsB,OAA7BA,EAAEC,aAAa,WAChBC,QAAQ/B,EAAKgC,IACXA,EAAOC,KAAKC,MAAMF,OACdG,EAAMN,EAAEC,aAAaJ,GACtBC,IAAMH,IAAMK,EAAEO,UAAYJ,EAAKG,IAC/BR,OAASH,QAAUK,EAAEQ,IAAML,EAAKG,IAChCR,OAASH,SAAWK,EAAES,YAAcN,EAAKG,SCbpDhC,OAAOoC,iBAAiB,OAAQ,SAC1BC,EAAYC,SAASC,cAAc,sBAEpCF,EAAW,CACZA,EAAYA,EAAUV,aAAa,YAE/Ba,EAAWtB,UACXuB,EAAWH,SAASI,iBAAiB,sBACrCF,EAMFC,EAAShB,QAAQD,IACZA,EAAEG,aAAa,mBAAqBT,WACrCM,EAAEmB,UAAUC,IAAI,qBARR,KACRC,EAAWP,SAASC,cAAc,eAAiBE,EAAS,GAChEI,EAASF,UAAUC,IAAI,eACpBC,IAAUL,EAAWK,EAASlB,aAAa,kBAC9Cb,QAAQ0B,SASJM,EAAQ,SACRC,EAAOV,EAAUW,QAAQ,SAAU9B,WACnC+B,EAAWF,EAAKG,MAAM,kBAAkB,GAC5CC,UAAM1B,QAAQD,QACRD,UAAgBC,IAChBF,EAAMgB,SAASI,qBAAqBnB,SACrCD,EAAI8B,OAAS,UACN,OACD,oBAAoBC,KAAK7B,GAC5BJ,WAAW6B,gBAAuB/B,iBAAkB,IAAKI,EAAKC,EAAOC,aAElE,YAAY6B,KAAK7B,GACpBJ,WAAW6B,kBAAyB/B,iBAAkB,IAAKI,EAAKC,EAAOC,aAEpE,oBAAoB6B,KAAK7B,GAC5BJ,WAAW2B,SAAa,IAAKzB,EAAKC,EAAOC,aAEtC,MAAM6B,KAAK7B,GACdc,SAASI,iBAAiB,YAAYjB,QAAQD,QACxC8B,EAAaC,MAAMC,KAAKhC,EAAEmB,WAAWc,OAAO/B,IAAM,SAAS2B,KAAK3B,IAAIgC,KAAK,KAC7ElC,EAAEmB,UAAYW,EACd9B,EAAEmB,UAAUC,YAAY1B,mBASpC4B,IACAL,EAAShB,QAAQkC,IACfA,EAAIvB,iBAAiB,QAAS,KACzBlB,YAAcyC,EAAIhC,aAAa,mBAChCc,EAAShB,QAAQD,IACfA,EAAEmB,UAAUiB,OAAO,iBAErBD,EAAIhB,UAAUC,IAAI,eAClB9B,QAAQ6C,EAAIhC,aAAa,kBACzBmB"}