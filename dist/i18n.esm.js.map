{"version":3,"file":"i18n.esm.js","sources":["../src/http.js","../src/utils.js","../src/index.js"],"sourcesContent":["/**\n * httpRequest\n * @param {String} uri \n * @param {Function} callback \n */\nexport default function (uri, cb) {\n  var httpRequest\n  if (window.XMLHttpRequest) {\n    // Mozilla, Safari, IE7+ ...\n    httpRequest = new XMLHttpRequest()\n  }\n\n  if (!httpRequest) {\n    alert('Giving up :( Cannot create an XMLHTTP instance');\n    return false\n  }\n  httpRequest.onreadystatechange = handler\n  httpRequest.open('GET', uri)\n  httpRequest.send(null)\n\n  function handler() {\n    if(httpRequest.readyState === XMLHttpRequest.DONE) {\n      if(httpRequest.status === 200) {\n        cb(JSON.parse(httpRequest.responseText))\n      } else {\n        console.error('There was a problem with the request.')\n      }\n    }\n  }\n}","import getData from \"./http\";\n\nconst i18nTypes = ['c', 'k', 'p', 's', 'p-ph', 'c-ph', 'k-ph', 'p-i', 'c-i', 'k-i']\n\nconst setLang = lang => window.localStorage.setItem('nofwlI18nLang', lang)\nconst getLang = () => window.localStorage.getItem('nofwlI18nLang')\n\nconst getJSON = (uri, type, _el, _attr, i) => {\n  _el.forEach(j => {\n    if(j.getAttribute('i18n-o') === null) { // i18n off\n      getData(uri, data => {\n        const val = j.getAttribute(_attr)\n        if(i === type) j.innerHTML = data[val]\n        if(i === `${type}-i`) j.src = data[val]\n        if(i === `${type}-ph`) j.placeholder = data[val]\n      })\n    }\n  })\n}\n\nexport {\n  i18nTypes,\n  setLang,\n  getLang,\n  getJSON,\n}","import { i18nTypes as types, getLang, setLang, getJSON } from './utils'\n\nwindow.addEventListener('load', () => {\n  let getFormat = document.querySelector('head meta[i18n]')\n\n  if(getFormat) {\n    getFormat = getFormat.getAttribute('i18n')\n    // (Get & Set) language\n    let _getLang = getLang()\n    const langBtns = document.querySelectorAll('[i18n-lang-btn]')\n    if(!_getLang) {\n      const currLang = document.querySelector('[i18n-def]') || langBtns[0]\n      currLang.classList.add('i18n-active')\n      if(currLang) _getLang = currLang.getAttribute('i18n-lang-btn')\n      setLang(_getLang)\n    } else {\n      langBtns.forEach(i => {\n        if(i.getAttribute('i18n-lang-btn') === getLang()) {\n          i.classList.add('i18n-active')\n        }\n      })\n    }\n    \n    const rules = () => {\n      const path = getFormat.replace('{lang}', getLang())\n      const basePath = path.match(/(.*i18n\\/)(.*)/)[1]\n      types.forEach(i => {\n        const _attr = `i18n-${i}`\n        const _el = document.querySelectorAll(`[${_attr}]`)\n        if(_el.length > 0) {\n          switch (true) {\n            case /^c((-ph)?|(-i)?)$/.test(i): // common\n              getJSON(`${basePath}/pub/common.${getLang()}.json`, 'c', _el, _attr, i)\n              break\n            case /^k(-ph)?$/.test(i): // keywords\n              getJSON(`${basePath}/pub/keywords.${getLang()}.json`, 'k', _el, _attr, i)\n              break\n            case /^p((-ph)?|(-i)?)$/.test(i): // current page\n              getJSON(`${path}.json`, 'p', _el, _attr, i)\n              break\n            case /^s$/.test(i): // i18n class\n              document.querySelectorAll('[i18n-s]').forEach(i => {\n                const notI18nCls = Array.from(i.classList).filter(j => !/i18n-*/.test(j)).join(' ')\n                i.classList = notI18nCls\n                i.classList.add(`i18n-${getLang()}`)\n              })\n              break\n            default:\n              break\n          }\n        }\n      })\n    }\n    rules()\n    langBtns.forEach(btn => {\n      btn.addEventListener('click', () => {\n        if(getLang() !== btn.getAttribute('i18n-lang-btn')) {\n          langBtns.forEach(i => {\n            i.classList.remove('i18n-active')\n          })\n          btn.classList.add('i18n-active')\n          setLang(btn.getAttribute('i18n-lang-btn'))\n          rules()\n        }\n      })\n    })\n  }\n})"],"names":["uri","cb","httpRequest","window","XMLHttpRequest","alert","onreadystatechange","readyState","DONE","status","JSON","parse","responseText","console","error","open","send","i18nTypes","setLang","lang","localStorage","setItem","getLang","getItem","getJSON","type","_el","_attr","i","forEach","j","getAttribute","getData","data","val","innerHTML","src","placeholder","addEventListener","getFormat","document","querySelector","_getLang","langBtns","querySelectorAll","classList","add","currLang","rules","path","replace","basePath","match","types","length","test","notI18nCls","Array","from","filter","join","btn","remove"],"mappings":"AAKe,iBAAUA,EAAKC,OACxBC,KACAC,OAAOC,iBAETF,EAAc,IAAIE,iBAGfF,SACHG,MAAM,mDACC,EAETH,EAAYI,8BAKPJ,EAAYK,aAAeH,eAAeI,OACjB,MAAvBN,EAAYO,OACbR,EAAGS,KAAKC,MAAMT,EAAYU,eAE1BC,QAAQC,MAAM,2CARpBZ,EAAYa,KAAK,MAAOf,GACxBE,EAAYc,KAAK,YChBbC,UAAY,CAAC,IAAK,IAAK,IAAK,IAAK,OAAQ,OAAQ,OAAQ,MAAO,MAAO,OAEvEC,QAAUC,GAAQhB,OAAOiB,aAAaC,QAAQ,gBAAiBF,GAC/DG,QAAU,IAAMnB,OAAOiB,aAAaG,QAAQ,iBAE5CC,QAAU,CAACxB,EAAKyB,EAAMC,EAAKC,EAAOC,KACtCF,EAAIG,QAAQC,IACsB,OAA7BA,EAAEC,aAAa,WAChBC,QAAQhC,EAAKiC,UACLC,EAAMJ,EAAEC,aAAaJ,GACxBC,IAAMH,IAAMK,EAAEK,UAAYF,EAAKC,IAC/BN,OAASH,QAAUK,EAAEM,IAAMH,EAAKC,IAChCN,OAASH,SAAWK,EAAEO,YAAcJ,EAAKC,SCZpD/B,OAAOmC,iBAAiB,OAAQ,SAC1BC,EAAYC,SAASC,cAAc,sBAEpCF,EAAW,CACZA,EAAYA,EAAUR,aAAa,YAE/BW,EAAWpB,gBACTqB,EAAWH,SAASI,iBAAiB,sBACvCF,EAMFC,EAASd,QAAQD,IACZA,EAAEG,aAAa,mBAAqBT,WACrCM,EAAEiB,UAAUC,IAAI,qBARR,OACNC,EAAWP,SAASC,cAAc,eAAiBE,EAAS,GAClEI,EAASF,UAAUC,IAAI,eACpBC,IAAUL,EAAWK,EAAShB,aAAa,kBAC9Cb,QAAQwB,SASJM,EAAQ,WACNC,EAAOV,EAAUW,QAAQ,SAAU5B,WACnC6B,EAAWF,EAAKG,MAAM,kBAAkB,GAC9CC,UAAMxB,QAAQD,UACND,UAAgBC,IAChBF,EAAMc,SAASI,qBAAqBjB,SACvCD,EAAI4B,OAAS,UACN,OACD,oBAAoBC,KAAK3B,GAC5BJ,WAAW2B,gBAAuB7B,iBAAkB,IAAKI,EAAKC,EAAOC,aAElE,YAAY2B,KAAK3B,GACpBJ,WAAW2B,kBAAyB7B,iBAAkB,IAAKI,EAAKC,EAAOC,aAEpE,oBAAoB2B,KAAK3B,GAC5BJ,WAAWyB,SAAa,IAAKvB,EAAKC,EAAOC,aAEtC,MAAM2B,KAAK3B,GACdY,SAASI,iBAAiB,YAAYf,QAAQD,UACtC4B,EAAaC,MAAMC,KAAK9B,EAAEiB,WAAWc,OAAO7B,IAAM,SAASyB,KAAKzB,IAAI8B,KAAK,KAC/EhC,EAAEiB,UAAYW,EACd5B,EAAEiB,UAAUC,YAAYxB,mBASpC0B,IACAL,EAASd,QAAQgC,IACfA,EAAIvB,iBAAiB,QAAS,KACzBhB,YAAcuC,EAAI9B,aAAa,mBAChCY,EAASd,QAAQD,IACfA,EAAEiB,UAAUiB,OAAO,iBAErBD,EAAIhB,UAAUC,IAAI,eAClB5B,QAAQ2C,EAAI9B,aAAa,kBACzBiB"}